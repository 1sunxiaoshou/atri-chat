2025-11-28 13:10:22 | ERROR    | api.routes.messages:send_audio_message:133 - 音频消息处理失败: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.
2025-11-28 13:10:22 | ERROR    | api.routes.messages:send_audio_message:134 - Traceback (most recent call last):
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\api\routes\messages.py", line 105, in send_audio_message
    response = await agent_manager.send_audio_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 422, in send_audio_message_async
    return await self.send_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 229, in send_message_async
    response = await agent.ainvoke(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 3137, in ainvoke
    async for chunk in self.astream(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 2873, in astream
    async with AsyncPregelLoop(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\_loop.py", line 1256, in __aenter__
    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\checkpoint\sqlite\__init__.py", line 502, in aget_tuple
    raise NotImplementedError(_AIO_ERROR_MSG)
NotImplementedError: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.

2025-11-28 13:11:22 | ERROR    | api.routes.messages:send_audio_message:133 - 音频消息处理失败: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.
2025-11-28 13:11:22 | ERROR    | api.routes.messages:send_audio_message:134 - Traceback (most recent call last):
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\api\routes\messages.py", line 105, in send_audio_message
    response = await agent_manager.send_audio_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 422, in send_audio_message_async
    return await self.send_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 229, in send_message_async
    response = await agent.ainvoke(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 3137, in ainvoke
    async for chunk in self.astream(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 2873, in astream
    async with AsyncPregelLoop(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\_loop.py", line 1256, in __aenter__
    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\checkpoint\sqlite\__init__.py", line 502, in aget_tuple
    raise NotImplementedError(_AIO_ERROR_MSG)
NotImplementedError: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.

2025-11-28 13:12:06 | ERROR    | api.routes.messages:send_audio_message:133 - 音频消息处理失败: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.
2025-11-28 13:12:06 | ERROR    | api.routes.messages:send_audio_message:134 - Traceback (most recent call last):
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\api\routes\messages.py", line 105, in send_audio_message
    response = await agent_manager.send_audio_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 422, in send_audio_message_async
    return await self.send_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 229, in send_message_async
    response = await agent.ainvoke(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 3137, in ainvoke
    async for chunk in self.astream(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 2873, in astream
    async with AsyncPregelLoop(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\_loop.py", line 1256, in __aenter__
    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\checkpoint\sqlite\__init__.py", line 502, in aget_tuple
    raise NotImplementedError(_AIO_ERROR_MSG)
NotImplementedError: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.

2025-11-28 13:14:49 | ERROR    | api.routes.messages:send_audio_message:133 - 音频消息处理失败: '_AsyncGeneratorContextManager' object has no attribute 'get_next_version'
2025-11-28 13:14:49 | ERROR    | api.routes.messages:send_audio_message:134 - Traceback (most recent call last):
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\api\routes\messages.py", line 105, in send_audio_message
    response = await agent_manager.send_audio_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 469, in send_audio_message_async
    return await self.send_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 232, in send_message_async
    response = await agent.ainvoke(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 3137, in ainvoke
    async for chunk in self.astream(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 2873, in astream
    async with AsyncPregelLoop(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\_loop.py", line 1180, in __init__
    self.checkpointer_get_next_version = checkpointer.get_next_version
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'get_next_version'

2025-11-28 13:16:08 | ERROR    | api.routes.messages:send_audio_message:133 - 音频消息处理失败: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.
2025-11-28 13:16:08 | ERROR    | api.routes.messages:send_audio_message:134 - Traceback (most recent call last):
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\api\routes\messages.py", line 105, in send_audio_message
    response = await agent_manager.send_audio_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 450, in send_audio_message_async
    return await self.send_message_async(
  File "c:\Users\sunxiaoshou\Desktop\ATRI_v2\core\agent_manager.py", line 232, in send_message_async
    response = await agent.ainvoke(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 3137, in ainvoke
    async for chunk in self.astream(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\main.py", line 2873, in astream
    async with AsyncPregelLoop(
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\pregel\_loop.py", line 1256, in __aenter__
    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)
  File "C:\Users\sunxiaoshou\Desktop\ATRI_v2\runtime\lib\site-packages\langgraph\checkpoint\sqlite\__init__.py", line 502, in aget_tuple
    raise NotImplementedError(_AIO_ERROR_MSG)
NotImplementedError: The SqliteSaver does not support async methods. Consider using AsyncSqliteSaver instead.
from langgraph.checkpoint.sqlite.aio import AsyncSqliteSaver
Note: AsyncSqliteSaver requires the aiosqlite package to use.
Install with:
`pip install aiosqlite`
See https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.sqlite.aio.AsyncSqliteSaverfor more information.

